<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="../static/css/sider.css" rel="stylesheet">
  
  <!-- Bootstrap 5 Bundle JS, including Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</head>

<body>

  <div class="d-flex" id="wrapper">
    <!-- Sidebar -->
    <div class="border-right" id="sidebar-wrapper">
      <div class="sidebar-heading bg-light">Attendance Menu</div>
      <div class="list-group list-group-flush">
        <a href="#" class="list-group-item list-group-item-action">Take Attendance</a>
        <a href="#" class="list-group-item list-group-item-action">Previous Attendance</a>
        <a href="#" class="list-group-item list-group-item-action">Attendance Report</a>
      </div>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
      <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
        <button class="btn btn-primary" id="menu-toggle">Toggle Menu</button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
            <li class="nav-item active">
              <a class="nav-link" href="#">Courses</a>
            </li>
          </ul>
        </div>
      </nav>
      <div class="container">
        <div class="table-wrapper">
            <div class="table-title">
                <div class="row">
                    <div class="col-sm-6">
                        <h2>Manage <b>Attendance</b></h2>
                    </div>
                </div>
            </div>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Record Id</th>
                        <th>Section Id</th>
                        <th>Session Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>thomashardy@mail.com</td>
                        <td>89 Chiaroscuro Rd, Portland, USA</td>
                        <td>(171) 555-2222</td>
                        <td>
                            <a href="#editEmployeeModal" class="edit" data-bs-toggle="modal">
                                <i class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</i>
                            </a>
                            <div class="dropdown" style="display: inline-block;">
                                <a class="btn dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="material-icons" title="Download">&#xE2C4;</i>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a href="#" class="dropdown-item">Download XML</a></li>
                                    <li><a href="#" class="dropdown-item">Download CSV</a></li>
                                    <li><a href="#" class="dropdown-item">Download JSON</a></li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div id="editEmployeeModal" class="modal fade" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <div style="position: relative; width: 300px;">
                      <input type="text" id="searchBox" class="form-control" placeholder="Search student name..." style="padding-left: 30px; border-radius: 20px; background-image: url('path/to/search-icon.png'); background-position: 10px 10px; background-repeat: no-repeat;">
                  </div>
                  <!-- Updated close button for Bootstrap 5 -->
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              
              <form method="POST">
                  <table class="table table-striped mt-6">
                      <thead class='thead-dark'>
                          <tr>
                              <th scope="col">Display Name</th>
                              <th scope="col">Previous Status</th>
                              <th scope="col">Attendance Status</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr th:each="student : ${students}">
                              <td th:text="${student.disPlayName}"></td>
                              <td th:text="${student.disPlayName}"></td>
                              <td>
                                  <button type="button" class="btn btn-outline-success btn-sm present" data-value="Present" th:data-id="${student.studentId}">P</button>
                                  <button type="button" class="btn btn-outline-warning btn-sm tardy" data-value="Tardy" th:data-id="${student.studentId}">T</button>
                                  <button type="button" class="btn btn-outline-danger btn-sm absent" data-value="Absent" th:data-id="${student.studentId}">A</button>
                                  <input type="hidden" th:name="'attendanceStatus[' + ${student.studentId} + ']'" th:id="'status_' + ${student.studentId}">
                              </td>
                          </tr>
                          <!-- Repeat for other students -->
                      </tbody>
                      <tbody>
                        <tr th:each="student : ${students}">
                            <td th:text="${student.disPlayName}">huidan</td>
                            <td th:text="${student.disPlayName}">Present</td>
                            <td>
                                <button type="button" class="btn btn-outline-success btn-sm present" data-value="Present" th:data-id="${student.studentId}">P</button>
                                <button type="button" class="btn btn-outline-warning btn-sm tardy" data-value="Tardy" th:data-id="${student.studentId}">T</button>
                                <button type="button" class="btn btn-outline-danger btn-sm absent" data-value="Absent" th:data-id="${student.studentId}">A</button>
                                <input type="hidden" th:name="'attendanceStatus[' + ${student.studentId} + ']'" th:id="'status_' + ${student.studentId}">
                            </td>
                        </tr>
                    </tbody>
                    <tbody>
                        <tr th:each="student : ${students}">
                            <td th:text="${student.disPlayName}">zhecheng</td>
                            <td th:text="${student.disPlayName}">Present</td>

                            <td>
                                <button type="button" class="btn btn-outline-success btn-sm present" data-value="Present" th:data-id="${student.studentId}">P</button>
                                <button type="button" class="btn btn-outline-warning btn-sm tardy" data-value="Tardy" th:data-id="${student.studentId}">T</button>
                                <button type="button" class="btn btn-outline-danger btn-sm absent" data-value="Absent" th:data-id="${student.studentId}">A</button>
                                <input type="hidden" th:name="'attendanceStatus[' + ${student.studentId} + ']'" th:id="'status_' + ${student.studentId}">
                            </td>
                        </tr>
                    </tbody>
                  </table>
                  <div class="modal-footer">
                      <button type="submit" class="btn btn-primary">Submit Edition</button>
                  </div>
              </form>
          </div>
      </div>
  </div>
  
  </div>
  <!-- /#wrapper -->

  <!-- Menu Toggle Script -->
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var menuToggle = document.getElementById('menu-toggle');
      menuToggle.addEventListener('click', function(e) {
        e.preventDefault();
        var wrapper = document.getElementById('wrapper');
        wrapper.classList.toggle('toggled');
      });
    });
    document.addEventListener("DOMContentLoaded", function() {
      const searchBox = document.getElementById("searchBox");
      const rows = document.querySelectorAll(".table tbody tr");
  
      searchBox.addEventListener("keyup", function() {
          const value = this.value.toLowerCase();
  
          rows.forEach(row => {
              const isVisible = row.textContent.toLowerCase().includes(value);
              row.style.display = isVisible ? "" : "none"; 
  
              if(value) {
                  row.style.backgroundColor = isVisible ? "rgb(207, 218, 224)" : "";
              } else {
                  row.style.backgroundColor = "";
              }
          });
      });
  });
  
  document.addEventListener("DOMContentLoaded", function() {
    const buttons = document.querySelectorAll(".absent, .present, .tardy");
    
    buttons.forEach(button => {
        button.addEventListener("click", function() {
            const studentId = this.getAttribute("data-id");
            const statusValue = this.getAttribute("data-value");
            
            document.querySelector(`input[name='attendanceStatus[${studentId}]']`).value = statusValue;
            
            this.classList.add("active");
            if (statusValue === "Present") {
                this.classList.add("btn-success");
                this.classList.remove("btn-danger", "btn-warning");
            } else if (statusValue === "Absent") {
                this.classList.add("btn-danger");
                this.classList.remove("btn-success", "btn-warning");
            } else if (statusValue === "Tardy") {
                this.classList.add("btn-warning");
                this.classList.remove("btn-success", "btn-danger");
            }
            
            // Remove classes from siblings
            const siblings = Array.from(this.parentNode.children).filter(child => child !== this);
            siblings.forEach(sibling => {
                sibling.classList.remove("active", "btn-success", "btn-danger", "btn-warning");
            });
        });
    });
});

  
  
    
  </script>

</body>

</html>
